'use strict';mix_d("CustomerReviewsMediaCards__cr-media-carousel:cr-media-carousel__UbMStUOv","exports tslib @c/browser-operations @c/aui-feature-detect @c/scoped-dom @c/metrics @c/navigation @c/remote-operations @c/dom @c/logger @p/A".split(" "),function(la,h,A,xa,ya,za,Aa,ma,na,Ba,Ca){function H(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}function oa(a,b,c){return"https://"+R()+"/portal/customer-reviews/media-gallery/ref="+a+"?ie=UTF8&asin="+c+"&mediaType="+b}function R(){var a=
B["default"].getLocation&&B["default"].getLocation().hostname||location.href,b=B["default"].getLocation&&B["default"].getLocation().host||location.host;return"localhost"===a?"pre-prod.amazon.com":b}function V(a){return a?a===m.IMAGE?y.IMAGE:y.VIDEO:y.ALL}function Da(a){return Object.keys(a).map(function(b){return b+"="+a[b]}).join("&")}function Ea(a,b){return h.__awaiter(this,void 0,void 0,function(){var c,d,e;return h.__generator(this,function(f){c=b.mediaType;d=b.metricsPrefix;q.logCounter(d+"IvxClicked",
1);e=Date.now();a.navigate({url:Fa(b),successCallback:function(){var g=Date.now()-e;q.logCounter(d+"IvxNavigatedDuration",g);q.logCounter(d+"IvxNavigated",1);q.logNoError("loadIVXError",c)},failCallback:function(g){q.logCounter(d+"IvxNavigated",0);pa("Failed to load SSNAP immersive modal for media: "+JSON.stringify(b)+".",g);q.logError("loadIVXError",c)}});return[2]})})}function Fa(a){var b=h.__assign,c=h.__assign,d=a.hidePivot,e=a.ingressType,f=a.isSingleReview,g=a.asin,k=a.refMarker,l=a.metricsPrefix,
r=a.reviewId,I=JSON,S=I.stringify;var J=a.mediaType===m.VIDEO;J=h.__assign({imageUrl:J?a.thumbnailUrl:a.url,physicalId:a.physicalId},J&&{videoUrl:a.url});a=b.call(h,c.call(h,{hidePivot:d,ingressType:e,isSingleReview:f,productAsin:g,refMarker:k,metricsPrefix:l,reviewId:r,viewData:S.call(I,[J])},a.filter&&{filter:a.filter}),a.mediaType===m.VIDEO?{videoUrl:a.url}:{imageUrl:a.url});return"ssnap://www.amazon.com/ive?"+Da(a)}var n=H(A),Ga=H(xa),T=H(ya),B=H(Aa),W=H(ma),v=H(na),Ha=H(Ca),m;(function(a){a.IMAGE=
"IMAGE";a.VIDEO="VIDEO"})(m||(m={}));var X,Ia=function(){return h.__awaiter(void 0,void 0,void 0,function(){return h.__generator(this,function(a){return[2,new Promise(function(b){P.now("mash").execute(function(c){b(c)})})]})})},Y=function(){return h.__awaiter(void 0,void 0,void 0,function(){return h.__generator(this,function(a){switch(a.label){case 0:return X?[3,2]:[4,Ia()];case 1:X=a.sent(),a.label=2;case 2:return[2,X]}})})},Ja=function(){return h.__awaiter(void 0,void 0,void 0,function(){return h.__generator(this,
function(a){switch(a.label){case 0:return[4,Y()];case 1:return[2,!!a.sent()]}})})},z;(function(a){a.MWEB="mWeb";a.MSHOP="mShop";a.DESKTOP="desktop"})(z||(z={}));var Z=function(){return h.__awaiter(void 0,void 0,void 0,function(){return h.__generator(this,function(a){switch(a.label){case 0:return[4,Ja()];case 1:return[2,a.sent()]}})})},aa=function(){return"true"===T["default"].cardRoot.getAttribute("data-mobile")||Ga["default"].isSupported("mobile")},Ka=function(){return h.__awaiter(void 0,void 0,
void 0,function(){var a;return h.__generator(this,function(b){switch(b.label){case 0:return(a=aa())?[4,Z()]:[3,2];case 1:a=!b.sent(),b.label=2;case 2:return[2,a]}})})},qa=function(){return h.__awaiter(void 0,void 0,void 0,function(){var a;return h.__generator(this,function(b){switch(b.label){case 0:return[4,Z()];case 1:if(!b.sent())return[3,2];a=z.MSHOP;return[3,4];case 2:return[4,Ka()];case 3:a=b.sent()?z.MWEB:z.DESKTOP,b.label=4;case 4:return[2,a]}})})},q=function(){function a(){}a.setPrefix=function(b){this.prefix=
b+"."};a.logCounter=function(b,c,d){za.count(""+this.prefix+(d?d+"."+b:b),c)};a.logError=function(b,c){this.logCounter(b,1,c)};a.logNoError=function(b,c){this.logCounter(b,0,c)};a.prefix="";return a}(),ba;(ba||(ba={})).clickHandler="CRImageThumbnailOpsClickHandler";var La=ba,ca;(ca||(ca={})).clickHandler="CRSeeMoreThumbnailOpsClickHandler";var Ma=ca,da;(da||(da={})).clickHandler="CRVideoThumbnailClickHandler";var Na=da,y;(function(a){a.IMAGE="image";a.VIDEO="video";a.ALL="all"})(y||(y={}));var ea=
function(){function a(b,c){this.popover=c;this.popoverOpenEventType="a-modal"===b?"afterShow":"afterSlide"}a.prototype.showSync=function(){var b=this;return new Promise(function(c){P.when("A").execute(function(d){var e="a:popover:"+b.popoverOpenEventType+":"+b.popover.name,f=function(){d.off(e,f);c()};d.on(e,f);b.show()})})};a.prototype.show=function(){this.popover.show()};a.prototype.hide=function(){this.popover.hide()};a.prototype.updatePosition=function(){this.popover.updatePosition()};a.getPopoverByName=
function(b){return this.popovers[b]};a.createOrGet=function(b,c,d,e,f){var g=this;return new Promise(function(k){g.popovers[c]?k(g.popovers[c]):P.when(b).execute(function(l){T["default"].scopeElement(d);l=l.create(e,f);g.popovers[c]=new a(b,l);k(g.popovers[c])})})};a.popovers={};return a}(),Oa={activate:"onclick",dataStrategy:"preload",hideHeader:!0,padding:"none"},Pa={dataStrategy:"preload"},Qa=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}h.__extends(b,a);b.get=function(c,
d,e,f){f=f?h.__assign(h.__assign({},f),{name:c}):h.__assign(h.__assign({},Oa),{name:c});return a.createOrGet.call(this,"a-secondary-view",c,d,e,f)};return b}(ea),ra=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}h.__extends(b,a);b.get=function(c,d,e,f){f=f?h.__assign(h.__assign({},f),{name:c}):h.__assign(h.__assign({},Pa),{name:c});return a.createOrGet.call(this,"a-modal",c,d,e,f)};return b}(ea),t=function(a){a.style.display="flex"},u=function(a){a.style.display="none"},x;
(function(a){a[a.LEFT=0]="LEFT";a[a.CENTER=1]="CENTER";a[a.RIGHT=2]="RIGHT";a[a.NONE=3]="NONE"})(x||(x={}));var M;(function(a){a[a.POTRAIT=0]="POTRAIT";a[a.LANDSCAPE=1]="LANDSCAPE"})(M||(M={}));var N=function(){function a(){this.handlers={}}a.getInstance=function(){a.instance||(a.instance=new a);return a.instance};a.prototype.publish=function(b,c){this.handlers[b]&&this.handlers[b].forEach(function(d){return d(c)})};a.prototype.subscribe=function(b,c){var d,e=null!==(d=this.handlers[b])&&void 0!==
d?d:new Set;e.add(c);this.handlers[b]=e;return c};a.prototype.unsubscribe=function(b,c){var d;(null!==(d=this.handlers[b])&&void 0!==d?d:new Set).delete(c)};return a}(),fa;(fa||(fa={})).thumbnailClickHandler="ThumbnailClickHandler";var Ra=fa,sa=function(){function a(b){this.crThumbnailsContainer=b}a.initClickHandler=function(){var b=n["default"].setup().define;b(Ra.thumbnailClickHandler,"click",function(c){c.stopBubble();var d=c.currentTarget.parentElement.dataset.thumbReviewid;c=parseInt(c.currentTarget.dataset.thumbidx,
10);N.getInstance().publish("CrMediaThumnailClicked",{idx:c,reviewId:d})})};a.subscribeEventsForReviewId=function(b){var c=new a(a.getPopoverWidgetById(b));N.getInstance().subscribe("MediaPopoverWidgetIndexChanged",function(d){var e=d.newIdx;b===d.reviewId&&(c.removeHighlight(d.oldIdx),c.highlight(e))})};a.getPopoverWidgetById=function(b){var c=v["default"].cardRoot.ownerDocument.getElementsByClassName("_Y3Itb_media-popover-thumbnail-image-container_9JPvE");return Array.from(c).filter(function(d){return d.dataset.thumbReviewid===
b})[0]};a.prototype.highlight=function(b){this.crThumbnailsContainer.querySelectorAll("span[data-thumbidx='"+b+"']")[0].classList.add("_Y3Itb_media-popover-thumbnail-image-view-active_mxkOn")};a.prototype.removeHighlight=function(b){this.crThumbnailsContainer.querySelectorAll("span[data-thumbidx='"+b+"']")[0].classList.remove("_Y3Itb_media-popover-thumbnail-image-view-active_mxkOn")};return a}(),p=function(){function a(b){var c=this;this.popover=b;this.loadMediaResources=function(){for(var e=c.popover.querySelectorAll("[data-lazyimagesource]"),
f=0;f<e.length;f++){var g=e[f],k=g.getAttribute("data-lazyimagesource");g="img"===g.tagName.toLowerCase()?g:g.getElementsByTagName("img")[0];g.getAttribute("src")!=k&&g.setAttribute("src",k)}};this.getCurrentMediaIndex=function(){for(var e=c.popover.querySelectorAll("[data-mediaid]"),f=0;f<e.length;f++)if("none"!==e[f].style.display)return f;return 0};this.getPreviousPopoverWidget=function(){return c.popover.previousElementSibling?new a(c.popover.previousElementSibling):null};this.getNextPopoverWidget=
function(){return c.popover.nextElementSibling?new a(c.popover.nextElementSibling):null};this.getNumbersOfMedia=function(){return c.popover.querySelectorAll("[data-mediaid]").length};this.toggleOverlay=function(){var e=c.popover.getElementsByClassName("_Y3Itb_overlay-content-container_1ubFP")[0];e.classList.contains("_Y3Itb_media-popover-overlay-fade-out_1eneO")?(e.classList.remove("_Y3Itb_media-popover-overlay-fade-out_1eneO"),e.classList.add("_Y3Itb_media-popover-overlay-fade-in_bZzwP")):(e.classList.add("_Y3Itb_media-popover-overlay-fade-out_1eneO"),
e.classList.remove("_Y3Itb_media-popover-overlay-fade-in_bZzwP"))};this.scrollIntoSelf=function(){c.popover.scrollIntoView()};this.scrollIntoMediaByIndex=function(e){c.scrollIntoSelf();var f=c.getCurrentMediaIndex();N.getInstance().publish("MediaPopoverWidgetIndexChanged",{oldIdx:f,newIdx:e,reviewId:c.getReviewId()});var g=!1;c.popover.querySelectorAll("[data-mediaid]").forEach(function(k,l){g?c.removeHighlightPageIndicator(l):c.addHighlightPageIndicator(l);l==e?(t(k),g=!0):u(k)})};this.scrollIntoMediaId=
function(e){c.scrollIntoSelf();c.popover.querySelectorAll("[data-mediaid]").forEach(function(f,g){f.getAttribute("data-mediaid")===e&&c.scrollIntoMediaByIndex(g)})};this.getReviewId=function(){return c.popover.getAttribute("data-reviewid")};this.getPageIndicator=function(e){var f=c.popover.getElementsByClassName("_Y3Itb_media-popover-page-indicator_36NFP")[0];if(f)return f.childNodes[e]};this.addHighlightPageIndicator=function(e){e=c.getPageIndicator(e);null===e||void 0===e?void 0:e.classList.add("_Y3Itb_highlighted_1QxVg")};
this.removeHighlightPageIndicator=function(e){e=c.getPageIndicator(e);null===e||void 0===e?void 0:e.classList.remove("_Y3Itb_highlighted_1QxVg")};var d=this.getReviewId();N.getInstance().subscribe("CrMediaThumnailClicked",function(e){d===e.reviewId&&c.scrollIntoMediaByIndex(e.idx)});qa().then(function(e){e===z.DESKTOP&&(sa.subscribeEventsForReviewId(d),N.getInstance().publish("MediaPopoverWidgetIndexChanged",{oldIdx:0,newIdx:c.getCurrentMediaIndex(),reviewId:d}))})}a.getPopoverWidgetById=function(b){return b?
v["default"].cardRoot.ownerDocument.getElementsByClassName("_Y3Itb_media-popover-list-container_3mcnh")[0].querySelector("div[data-reviewid='"+b+"']"):null};a.prototype.handlePopoverClick=function(b){switch(b){case x.LEFT:if(0<this.getCurrentMediaIndex())this.scrollIntoMediaByIndex(this.getCurrentMediaIndex()-1);else if(b=this.getPreviousPopoverWidget())b.scrollIntoSelf(),b.scrollIntoMediaByIndex(b.getNumbersOfMedia()-1);break;case x.CENTER:this.toggleOverlay();break;case x.RIGHT:if(this.getCurrentMediaIndex()<
this.getNumbersOfMedia()-1)this.scrollIntoMediaByIndex(this.getCurrentMediaIndex()+1);else if(b=this.getNextPopoverWidget())b.scrollIntoSelf(),b.scrollIntoMediaByIndex(0)}};a.prototype.scrollIntoNextPopover=function(){var b=this.getNextPopoverWidget()||this.getPreviousPopoverWidget();b&&b.scrollIntoSelf()};return a}(),w;(function(a){a.closePopoverClickHandler="ClosePopoverClickHandler";a.popoverClickHandler="PopoverClickHandler";a.desktopLeftClickHandler="DesktopLeftClickHandler";a.desktopRightClickHandler=
"DesktopRightClickHandler";a.openReportConfirmationDialogClickHandler="OpenReportConfirmationDialogClickHandler";a.helpfulVoteClickHandler="HelpfulVoteClickHandler";a.confirmReportAbuseClickHandler="ConfirmReportAbuseClickHandler";a.noopHandler="noopHandler";a.loadMediaPopover="loadMediaPopover";a.closePopoverErrorDialogClickHandler="ClosePopoverErrorDialogClickHandler"})(w||(w={}));var Sa=function(){function a(b){this.popover=b;b=b.getElementsByClassName("_Y3Itb_cr-popover-overlay-text-container_NfghQ")[0];
this.text=b.querySelector("._Y3Itb_cr-text_28H9k");this.title=b.querySelector("._Y3Itb_cr-title_3bWqW");this.expandButton=b.querySelector("._Y3Itb_cr-text-expand-button_2BWKW");this.hideButton=b.querySelector("._Y3Itb_cr-text-hide-button_2qNi2")}a.prototype.toggleElementExpansion=function(b,c){c?(b.classList.remove("_Y3Itb_truncated_j_-Jw"),b.classList.add("_Y3Itb_expanded_2wQ4c")):(b.classList.remove("_Y3Itb_expanded_2wQ4c"),b.classList.add("_Y3Itb_truncated_j_-Jw"))};a.prototype.initResizeObserver=
function(){var b=this;if(this.title||this.text)this.observer=new ResizeObserver(function(c){var d;try{for(var e=h.__values(c),f=e.next();!f.done;f=e.next())a.isTruncated(f.value.target,"_Y3Itb_truncated_j_-Jw")&&t(b.expandButton)}catch(k){var g={error:k}}finally{try{f&&!f.done&&(d=e.return)&&d.call(e)}finally{if(g)throw g.error;}}}),this.title&&this.observer.observe(this.title),this.text&&this.observer.observe(this.text)};a.prototype.expandText=function(){this.text&&a.isTruncated(this.text,"_Y3Itb_truncated_j_-Jw")&&
this.toggleElementExpansion(this.text,!0);this.title&&a.isTruncated(this.title,"_Y3Itb_truncated_j_-Jw")&&this.title.classList.remove("_Y3Itb_truncated_j_-Jw");u(this.expandButton);t(this.hideButton);this.setPopoverOverlayGradient(!0);this.showActionButtons(!1)};a.prototype.toggleText=function(){this.text&&a.isTruncated(this.text,"_Y3Itb_truncated_j_-Jw")||this.title&&a.isTruncated(this.title,"_Y3Itb_truncated_j_-Jw")?this.expandText():this.hideText()};a.prototype.hideText=function(){this.text&&(this.text.offsetHeight<
this.text.scrollHeight&&(this.text.scrollTop=0),this.toggleElementExpansion(this.text,!1));this.title&&this.title.classList.add("_Y3Itb_truncated_j_-Jw");u(this.hideButton);this.setPopoverOverlayGradient(!1);this.showActionButtons(!0)};a.prototype.setPopoverOverlayGradient=function(b){var c=this.popover.getElementsByClassName("_Y3Itb_cr-media-popover-overlay-container_32qUq")[0];c&&(b?(c.classList.add("_Y3Itb_popover-overlay-gradient_114MI"),c.dataset.mixOperations=w.noopHandler):c.classList.contains("_Y3Itb_popover-overlay-gradient_114MI")&&
(c.classList.remove("_Y3Itb_popover-overlay-gradient_114MI"),c.dataset.mixOperations&&delete c.dataset.mixOperations))};a.prototype.showActionButtons=function(b){var c=this.popover.getElementsByClassName("_Y3Itb_cr-action-buttons-container_28a_m")[0];c&&(b?t(c):u(c))};a.isTruncated=function(b,c){return b&&b.offsetHeight<b.scrollHeight&&b.classList.contains(c)};return a}(),ha=function(a,b){if(!a)return!1;b=b.some(function(c){return a.classList.contains(c)});return a.offsetHeight<a.scrollHeight&&b},
Ta=function(){function a(b){this.popover=b;this.truncatedClasses=["_Y3Itb_cr-sidepanel-truncated-text_Iwzw1","_Y3Itb_cr-sidepanel-truncated-title_24LLQ"];this.textContainer=b.getElementsByClassName("_Y3Itb_cr-media-popover-sidepanel-header-section_2CMxM")[0];this.text=this.textContainer.querySelector("._Y3Itb_cr-sidepanel-text_2amkG");this.title=this.textContainer.querySelector("._Y3Itb_cr-sidepanel-title_2ZmzZ");this.expandButton=this.textContainer.querySelector("._Y3Itb_cr-sidepanel-expander-see-more_2303x");
this.hideButton=this.textContainer.querySelector("._Y3Itb_cr-sidepanel-expander-see-less_2BjZT");this.gradient=this.textContainer.querySelector("._Y3Itb_cr-sidepanel-container-gradient_2H1nw")}a.prototype.initResizeObserver=function(){var b=this;if(this.title||this.text)this.observer=new ResizeObserver(function(c){var d;try{for(var e=h.__values(c),f=e.next();!f.done;f=e.next())ha(f.value.target,b.truncatedClasses)&&t(b.expandButton)}catch(k){var g={error:k}}finally{try{f&&!f.done&&(d=e.return)&&d.call(e)}finally{if(g)throw g.error;
}}}),this.title&&this.observer.observe(this.title),this.text&&this.observer.observe(this.text)};a.prototype.expandText=function(){this.toggleSidepanel(!0);u(this.expandButton);t(this.hideButton)};a.prototype.toggleText=function(){this.text&&ha(this.text,this.truncatedClasses)||this.title&&ha(this.title,this.truncatedClasses)?this.expandText():this.hideText()};a.prototype.hideText=function(){this.toggleSidepanel(!1);u(this.hideButton)};a.prototype.toggleSidepanel=function(b){this.gradient&&this.toggleElementExpansion(this.gradient,
"_Y3Itb_cr-sidepanel-container-gradient-truncated_XKtpo",b);this.textContainer&&this.toggleElementExpansion(this.textContainer,"_Y3Itb_cr-media-popover-sidepanel-header-section-truncated_2nok9",b);this.text&&this.toggleElementExpansion(this.text,"_Y3Itb_cr-sidepanel-truncated-text_Iwzw1",b);this.title&&this.toggleElementExpansion(this.title,"_Y3Itb_cr-sidepanel-truncated-title_24LLQ",b)};a.prototype.toggleElementExpansion=function(b,c,d){d?b.classList.remove(c):b.classList.add(c)};return a}(),ia=
function(a){if(a)return(null===a||void 0===a?0:a.getElementsByClassName("_Y3Itb_cr-popover-overlay-text-container_NfghQ")[0])?new Sa(a):new Ta(a)},Ua=function(){return function(){var a=this;this.show=function(){t(a.popoverList)};this.hide=function(){u(a.popoverList)};this.getNumberOfPopoversLoaded=function(){return a.popoverList.childNodes.length};this.getNumberOfPopoversLeft=function(){if(a.currentReviewId){var b=0;a.popoverList.childNodes.forEach(function(c,d){c.getAttribute("data-reviewid")==a.currentReviewId&&
(b=a.getNumberOfPopoversLoaded()-d)});return b}return a.popoverList.childNodes.length};this.addPopovers=function(b){b.querySelectorAll("._Y3Itb_media-popover-container_15D5F").forEach(function(c){c=na.unscope(c);var d=c.getAttribute("data-reviewid");p.getPopoverWidgetById(d)||(a.popoverList.appendChild(c),a.observer.observe(c),c=ia(p.getPopoverWidgetById(d)),null===c||void 0===c?void 0:c.initResizeObserver())})};this.scrollTo=function(b,c){a.setCurrentReviewId(b);b=p.getPopoverWidgetById(b);(new p(b)).scrollIntoMediaId(c)};
this.setCurrentReviewId=function(b){a.currentReviewId=b};this.doesPopoverExists=function(b){return null!=p.getPopoverWidgetById(b)};this.getNextToken=function(){return a.popoverList.getAttribute("data-next-token")};this.setNextToken=function(b){return a.popoverList.setAttribute("data-next-token",b)};this.setOnScrollCallback=function(b){a.onScrollCallback=b};this.popoverList=v["default"].cardRoot.ownerDocument.getElementsByClassName("_Y3Itb_media-popover-list-container_3mcnh")[0];sa.initClickHandler();
this.observer=new IntersectionObserver(function(b){b.forEach(function(c){if(c.isIntersecting){c=new p(c.target);var d=c.getReviewId(),e=a.currentReviewId;a.setCurrentReviewId(d);if(a.onScrollCallback)a.onScrollCallback(d);c.loadMediaResources();c=ia(p.getPopoverWidgetById(e));null===c||void 0===c?void 0:c.hideText()}})},{threshold:.5})}}(),U=function(){function a(){this.confirmationDialog=v["default"].cardRoot.ownerDocument.querySelector("._Y3Itb_media-popover-report-abuse-confirmation-dialog_7HNIt");
this.confirmButton=v["default"].cardRoot.ownerDocument.querySelector("._Y3Itb_media-popover-report-abuse-confirmation-dialog-button_35f75")}a.prototype.setReviewId=function(b){this.confirmButton.dataset.id=b};a.prototype.setAsin=function(b){this.confirmButton.dataset.asin=b};a.prototype.show=function(){t(this.confirmationDialog)};a.prototype.hide=function(){u(this.confirmationDialog)};return a}(),O=function(){function a(b){this.toastBar=a.getToastBarByName(b);this.button=this.toastBar.getElementsByClassName("_Y3Itb_toast-bar-button_1yIpW")[0]}
a.getToastBarByName=function(b){return v["default"].cardRoot.ownerDocument.querySelector("div[data-toast-bar-name='"+b+"']")};a.prototype.setClickParams=function(b){var c=this;b.forEach(function(d,e){c.button.setAttribute(e,d)})};a.prototype.show=function(){t(this.toastBar)};a.prototype.hide=function(){u(this.toastBar)};return a}(),ta=function(){function a(){this.popoverSkeleton=v["default"].cardRoot.ownerDocument.getElementsByClassName("_Y3Itb_media-popover-skeleton-container_3DI7n")[0];this.profileSkeleton=
this.popoverSkeleton.getElementsByClassName("_Y3Itb_profile-skeleton_1JfdD")[0]}a.prototype.show=function(){t(this.popoverSkeleton)};a.prototype.hide=function(){u(this.popoverSkeleton)};a.prototype.setLoadingAnimation=function(b){b?this.profileSkeleton.classList.add("_Y3Itb_loading_3908t"):this.profileSkeleton.classList.contains("_Y3Itb_loading_3908t")&&this.profileSkeleton.classList.remove("_Y3Itb_loading_3908t")};return a}(),ua=function(){function a(){this.popoverSkeleton=v["default"].cardRoot.ownerDocument.getElementsByClassName("_Y3Itb_desktop-skeleton-container_1fqf-")[0];
this.popoverSkeletonSpinnerContainer=v["default"].cardRoot.ownerDocument.getElementsByClassName("_Y3Itb_desktop-spinner-container_22ngp")[0]}a.prototype.show=function(){t(this.popoverSkeleton)};a.prototype.hide=function(){u(this.popoverSkeleton)};a.prototype.setLoadingAnimation=function(b){b?t(this.popoverSkeletonSpinnerContainer):u(this.popoverSkeletonSpinnerContainer)};return a}(),C;(function(a){a[a.Popover=0]="Popover";a[a.Gallery=1]="Gallery";a[a.ReportAbuseConfirmationDialog=2]="ReportAbuseConfirmationDialog"})(C||
(C={}));var K=function(){function a(){}a.getInstance=function(){a.instance||(a.instance=new a);return a.instance};a.prototype.initPopoverWidgetList=function(){null==this.popoverWidgetList&&(this.popoverWidgetList=new Ua);return this.popoverWidgetList};a.prototype.initPopoverSkeletonClient=function(b){this.popoverSkeleton=b?new ua:new ta};a.prototype.initPopover=function(b,c){a.currentScreen=C.Popover;a.popoverName=b;this.resetOverlayComponents();this.initPopoverWidgetList();this.initPopoverSkeletonClient(c)};
a.prototype.loadMediaPopover=function(b){return h.__awaiter(this,void 0,void 0,function(){var c,d,e,f,g,k=this;return h.__generator(this,function(l){switch(l.label){case 0:return this.initPopover(b.popoverDetails.popoverName,b.isDesktop),this.popoverSkeleton.show(),this.popoverWidgetList.hide(),this.popoverSkeleton.setLoadingAnimation(!0),b.popoverDetails.popover?[4,b.popoverDetails.popover.showSync()]:[3,2];case 1:l.sent(),l.label=2;case 2:c=this.popoverWidgetList.doesPopoverExists(b.reviewId),d=
0,l.label=3;case 3:l.trys.push([3,7,,8]),l.label=4;case 4:if(c)return[3,6];e=0===d;return[4,this.fetchAnotherPopoversPage(b.asin,b.mediaType,e)];case 5:return f=l.sent(),c=this.popoverWidgetList.doesPopoverExists(b.reviewId),d++,f?[3,4]:[3,6];case 6:return this.popoverWidgetList.show(),c&&this.popoverWidgetList.scrollTo(b.reviewId,b.mediaId),this.popoverSkeleton.hide(),[3,8];case 7:return l.sent(),this.popoverSkeleton.setLoadingAnimation(!1),g=new O("loadPopoverError"),g.setClickParams(new Map([["data-popovername",
b.popoverDetails.popoverName],["data-asin",b.asin],["data-mediatype",b.mediaType.toString()],["data-reviewid",b.reviewId],["data-mediaid",b.mediaId]])),g.show(),[3,8];case 8:return this.popoverWidgetList.setOnScrollCallback(function(){5>=k.popoverWidgetList.getNumberOfPopoversLeft()&&k.fetchAnotherPopoversPage(b.asin,b.mediaType)}),[2]}})})};a.prototype.resetOverlayComponents=function(){(new U).hide();(new O("loadPopoverError")).hide();(new O("reportAbuseThankYouMessage")).hide()};a.prototype.showReportAbuseConfirmationDialog=
function(b,c){a.currentScreen=C.ReportAbuseConfirmationDialog;var d=new U;d.setReviewId(b);d.setAsin(c);d.show()};a.prototype.back=function(){switch(a.currentScreen){case C.Popover:case C.Gallery:ea.getPopoverByName(a.popoverName).hide();break;case C.ReportAbuseConfirmationDialog:(new U).hide(),a.currentScreen=C.Popover}};a.prototype.fetchAnotherPopoversPage=function(b,c,d){void 0===d&&(d=!1);return h.__awaiter(this,void 0,void 0,function(){var e,f;return h.__generator(this,function(g){switch(g.label){case 0:e=
this.popoverWidgetList.getNumberOfPopoversLoaded();f=this.popoverWidgetList.getNextToken();if(!(d||!this.isAlreadyLoadingMedia&&f&&500>=e))return[3,5];this.isAlreadyLoadingMedia=!0;g.label=1;case 1:return g.trys.push([1,,3,4]),[4,this.loadPopovers(b,c,f)];case 2:return g.sent(),[3,4];case 3:return this.isAlreadyLoadingMedia=!1,[7];case 4:return[2,!0];case 5:return[2,!1]}})})};a.prototype.loadPopovers=function(b,c,d){return h.__awaiter(this,void 0,void 0,function(){var e,f;return h.__generator(this,
function(g){switch(g.label){case 0:return e=ma.setup(["renderPopoverList"]),[4,e.renderPopoverList({asin:b,nextToken:d,mediaType:c,limit:50})];case 1:return f=g.sent(),this.popoverWidgetList.addPopovers(f),d=f.getAttribute("data-next-token"),this.popoverWidgetList.setNextToken(d),[2,d]}})})};return a}().getInstance(),Va=function(){function a(){this.desktopPopoverModalOptions={dataStrategy:"preload",hideHeader:!0,closeButton:!1,padding:"none",name:"cr-media-popover"}}a.prototype.onVideoClickHandler=
function(b){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(c){throw Error("Video click handler on Desktop is not yet implemented.");})})};a.prototype.onImageClickHandler=function(b){var c;return h.__awaiter(this,void 0,void 0,function(){var d,e,f,g,k,l;return h.__generator(this,function(r){switch(r.label){case 0:d=null===(c=b.currentTarget)||void 0===c?void 0:c.dataset;e=d.photopopoverdesktoptreatment||"C";f=b.currentTarget;ue&&ue.trigger&&ue.trigger("CM_CR_MEDIA_CAROUSEL_PHOTO_POPOVER_DESKTOP_756292",
e);if("T1"!==e)return[3,3];g=T["default"].cardRoot.getElementsByClassName("_Y3Itb_media-popover-container_2BBbs")[0];return[4,ra.get(this.desktopPopoverModalOptions.name,g,f,this.desktopPopoverModalOptions)];case 1:return k=r.sent(),k.popover.$trigger.context=f,l=m[d.mediatype],[4,K.loadMediaPopover({mediaType:l,asin:d.asin,reviewId:d.reviewid,mediaId:d.physicalid,isDesktop:!0,popoverDetails:{popoverName:this.desktopPopoverModalOptions.name,popover:k}})];case 2:return r.sent(),k.updatePosition(),
[3,5];case 3:return[4,this.showImageGallery(b)];case 4:r.sent(),r.label=5;case 5:return[2]}})})};a.prototype.onSeeMoreClickHandler=function(b){var c;return h.__awaiter(this,void 0,void 0,function(){var d,e,f;return h.__generator(this,function(g){switch(g.label){case 0:return d=null===(c=b.currentTarget)||void 0===c?void 0:c.dataset,e=m[d.mediatype],f=V(e),f!==y.IMAGE?[3,2]:[4,this.showImageGallery(b)];case 1:return g.sent(),[3,3];case 2:throw q.logError("loadDesktopVideoGalleryError",f),Error("Video gallery is not available on desktop.");
case 3:return[2]}})})};a.prototype.showImageGallery=function(b){return h.__awaiter(this,void 0,void 0,function(){var c,d;return h.__generator(this,function(e){switch(e.label){case 0:return c=b.currentTarget,[4,ra.get("widget_customer_image_gallery",c,c)];case 1:return d=e.sent(),d.popover.$trigger.context=c,d.show(),c.classList.remove("a-declarative"),[2]}})})};return a}(),pa=function(a,b){a=b?a+". Error object: "+JSON.stringify({message:b.message,name:b.name,stack:b.stack}):a;Ba.log(a,"FATAL")},
D;(function(a){a.CAROUSEL="crsl";a.IMAGES_CAROUSEL="crsl_img";a.VIDEOS_CAROUSEL="crsl_vid"})(D||(D={}));var E;(function(a){a.DETAIL_PAGE_WIDGET="dp";a.IMAGE_GALLERY="img";a.MEDIA_GALLERY="mg";a.OTHER="othr"})(E||(E={}));var F;(function(a){a.SEE_MORE="sm";a.POPOVER="pop";a.IMAGE="img";a.VIDEO="vid"})(F||(F={}));var G;(function(a){a.DESKTOP="d";a.MOBILE_APP="ma";a.MOBILE_BROWSER="mb";a.TABLET_APP="ta";a.TABLET_BROWSER="tb";a.UNKNOWN="unkn"})(G||(G={}));A=function(){function a(b,c,d,e){this.page=b;this.device=
c;this.widget=d;this.location=e}a.prototype.toString=function(){return a.PREFIX+a.DELIMITER+this.page+a.DELIMITER+this.device+a.DELIMITER+this.widget+a.DELIMITER+this.location};a.prototype.appendToString=function(b){return b?this.toString()+a.DELIMITER+b:this.toString()};a.MAX_LENGTH=32;a.PREFIX="cm_cr";a.DELIMITER="_";return a}();var Wa=new A(E.DETAIL_PAGE_WIDGET,G.MOBILE_APP,D.CAROUSEL,F.IMAGE),Xa=new A(E.DETAIL_PAGE_WIDGET,G.MOBILE_APP,D.CAROUSEL,F.VIDEO),Ya=new A(E.DETAIL_PAGE_WIDGET,G.MOBILE_APP,
D.IMAGES_CAROUSEL,F.SEE_MORE),Za=new A(E.DETAIL_PAGE_WIDGET,G.MOBILE_APP,D.VIDEOS_CAROUSEL,F.SEE_MORE),$a=new A(E.DETAIL_PAGE_WIDGET,G.MOBILE_BROWSER,D.IMAGES_CAROUSEL,F.SEE_MORE),ab=new A(E.DETAIL_PAGE_WIDGET,G.MOBILE_BROWSER,D.CAROUSEL,F.VIDEO),bb=function(){function a(){}a.prototype.onVideoClickHandler=function(b){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(c){switch(c.label){case 0:return[4,this.onMediaClickHandler(b)];case 1:return c.sent(),[2]}})})};a.prototype.onImageClickHandler=
function(b){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(c){switch(c.label){case 0:return[4,this.onMediaClickHandler(b)];case 1:return c.sent(),[2]}})})};a.prototype.onSeeMoreClickHandler=function(b){var c;return h.__awaiter(this,void 0,void 0,function(){var d,e,f;return h.__generator(this,function(g){switch(g.label){case 0:return d=null===(c=b.currentTarget)||void 0===c?void 0:c.dataset,e=m[d.mediatype],f=V(e),[4,this.goToGallery(b,f)];case 1:return g.sent(),
[2]}})})};a.prototype.onMediaClickHandler=function(b){var c;return h.__awaiter(this,void 0,void 0,function(){var d,e,f,g,k;return h.__generator(this,function(l){switch(l.label){case 0:return d=null===(c=b.currentTarget)||void 0===c?void 0:c.dataset,e=m[d.mediatype],f=d.rank,g={reviewId:d.reviewid,mediaType:e,url:d.url,thumbnailUrl:d.thumbnailurl,physicalId:d.physicalid,asin:d.asin,isSingleReview:!1,hidePivot:!1,refMarker:a.getIVXRefMarker(e,f),ingressType:"dpreviews",filter:e===m.IMAGE?"image":"video",
metricsPrefix:e===m.IMAGE?"CarouselImageToAppX":"CarouselVideoToAppX"},[4,Y()];case 1:return k=l.sent(),[4,Ea(k,g)];case 2:return l.sent(),[2]}})})};a.prototype.goToGallery=function(b,c){var d;return h.__awaiter(this,void 0,void 0,function(){var e,f,g,k;return h.__generator(this,function(l){switch(l.label){case 0:return e=null===(d=b.currentTarget)||void 0===d?void 0:d.dataset,f=e.asin,g=c===y.IMAGE?Ya:Za,[4,Y()];case 1:return k=l.sent(),k.navigate({url:oa(g.toString(),c,f),successCallback:function(){q.logNoError("loadMediaGalleryError",
c)},failCallback:function(r){pa("Failed to load gallery for asin: "+f+".",r);q.logError("loadMediaGalleryError",c)}}),[2]}})})};a.getIVXRefMarker=function(b,c){return(b===m.IMAGE?Wa:Xa).appendToString(c)};return a}(),cb=function(){function a(){}a.prototype.onVideoClickHandler=function(b){var c;return h.__awaiter(this,void 0,void 0,function(){var d,e,f,g,k,l,r;return h.__generator(this,function(I){d=null===(c=b.currentTarget)||void 0===c?void 0:c.dataset;e=d.asin;f=d.physicalid;g=d.reviewid;k=d.extension;
l=d.thumbnailurl;r=this.getRefMarker(d.rank);Ha["default"].trigger("a:declarative:reviews:open-mweb-immersive-video-modal:click",{$event:b.event,$target:b.currentTarget,data:{asin:e,filter:"video",isSingleReview:!0,mediaType:"video",metricsPrefix:"CarouselVideoToAppX",physicalId:f,refMarker:r,reviewId:g,shouldTriggerRefTag:!0,slateImageUrl:l,url:"https://m.media-amazon.com/images/I/"+f+"."+k}});return[2]})})};a.prototype.onImageClickHandler=function(b){this.onMediaClickHandler(b)};a.prototype.onMediaClickHandler=
function(b){var c;b=null===(c=b.currentTarget)||void 0===c?void 0:c.dataset;B["default"].setLocation(this.createRedirectUrlToMobileFeed(b.asin,b.physicalid,b.extension,b.reviewid))};a.prototype.createRedirectUrlToMobileFeed=function(b,c,d,e){return"https://"+R()+"/portal/customer-reviews/mobile-media-feed/"+b+"/ref=cm_cr_dp_ma_crsl_img?ie=UTF8&imageExtension="+d+"&physicalId="+c+"&reviewId="+e};a.prototype.getRefMarker=function(b){return ab.appendToString(b)};return a}(),eb=function(){function a(){this.mWebMobileFeedThumbnailClickHandler=
new cb}a.prototype.addMinHeightToParent=function(b){(b=v["default"].cardRoot.ownerDocument.querySelector("."+b))&&b.parentElement&&(b.parentElement.style.minHeight="inherit")};a.prototype.onVideoClickHandler=function(b){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(c){switch(c.label){case 0:return[4,this.mWebMobileFeedThumbnailClickHandler.onVideoClickHandler(b)];case 1:return c.sent(),[2]}})})};a.prototype.onImageClickHandler=function(b){var c;return h.__awaiter(this,
void 0,void 0,function(){var d,e,f,g,k,l,r,I,S,J;return h.__generator(this,function(L){switch(L.label){case 0:return d=null===(c=b.currentTarget)||void 0===c?void 0:c.dataset,e=W["default"].setup(["triggerWeblab"]),f=d.photopopovermwebgatingtreatment||"C",g="C",k=d.iskindleapp?"true"===d.iskindleapp.toLowerCase():!1,(l="T1"===f&&!k)?[4,e.triggerWeblab({weblabId:"CM_CR_MEDIA_CAROUSEL_PHOTO_POPOVER_MWEB_678973"}).then(function(db){g=db.treatment})]:[3,2];case 1:L.sent(),L.label=2;case 2:if(!l||"T1"!==
g)return[3,5];r=T["default"].cardRoot.getElementsByClassName("_Y3Itb_media-popover-container_2BBbs")[0];I="cr-media-popover";return[4,Qa.get(I,r,b.currentTarget)];case 3:return S=L.sent(),J=m[d.mediatype],[4,K.loadMediaPopover({mediaType:J,asin:d.asin,reviewId:d.reviewid,mediaId:d.physicalid,popoverDetails:{popoverName:I,popover:S}})];case 4:return L.sent(),this.addMinHeightToParent("_Y3Itb_media-popover-container_2BBbs"),b.currentTarget&&b.currentTarget.classList.remove("a-declarative"),[3,6];case 5:this.mWebMobileFeedThumbnailClickHandler.onImageClickHandler(b),
L.label=6;case 6:return[2]}})})};a.prototype.onSeeMoreClickHandler=function(b){var c;return h.__awaiter(this,void 0,void 0,function(){var d,e,f,g;return h.__generator(this,function(k){d=null===(c=b.currentTarget)||void 0===c?void 0:c.dataset;e=m[d.mediatype];f=V(e);g=d.asin;if(f===y.IMAGE)B["default"].setLocation(oa($a.toString(),y.IMAGE,g));else throw q.logError("loadVideoGalleryError",f),Error("Video gallery is not available on mWeb.");return[2]})})};return a}(),fb=function(){function a(){}a.getThumbnailClickHandler=
function(){return h.__awaiter(this,void 0,void 0,function(){var b;return h.__generator(this,function(c){switch(c.label){case 0:return[4,qa()];case 1:b=c.sent();switch(b){case z.MSHOP:return[2,new bb];case z.MWEB:return[2,new eb];case z.DESKTOP:return[2,new Va]}return[2]}})})};return a}(),gb=function(){function a(b){this.clickHandler=this.clickHandler=b}a.prototype.registerThumbnailClickHandlers=function(){this.registerCRVideoThumbnailClickHandler();this.registerCRImageThumbnailClickHandler();this.registerCRSeeMoreThumbnailClickHandler()};
a.prototype.registerCRVideoThumbnailClickHandler=function(){var b=this,c=n["default"].setup().define;c(Na.clickHandler,"click",function(d){return h.__awaiter(b,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return[4,this.clickHandler.onVideoClickHandler(d)];case 1:return e.sent(),q.logCounter("videoThumbnail.click",1),[2]}})})})};a.prototype.registerCRImageThumbnailClickHandler=function(){var b=this,c=n["default"].setup().define;c(La.clickHandler,"click",function(d){return h.__awaiter(b,
void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return[4,this.clickHandler.onImageClickHandler(d)];case 1:return e.sent(),q.logCounter("imageThumbnail.click",1),[2]}})})})};a.prototype.registerCRSeeMoreThumbnailClickHandler=function(){var b=this,c=n["default"].setup().define;c(Ma.clickHandler,"click",function(d){return h.__awaiter(b,void 0,void 0,function(){var e,f;return h.__generator(this,function(g){switch(g.label){case 0:return[4,this.clickHandler.onSeeMoreClickHandler(d)];
case 1:return g.sent(),e=m[null===(f=d.currentTarget)||void 0===f?void 0:f.dataset.mediatype],q.logCounter("seeMore."+e.toLowerCase()+".click",1),[2]}})})})};return a}(),ja;(ja||(ja={})).closePopoverClickHandler="ClosePopoverClickHandler";var hb=function(){function a(){}a.registerClosePopoverClickHandler=function(){var b=n["default"].setup().define;b(ja.closePopoverClickHandler,"click",function(c){c.stopBubble();K.back()})};return a}(),Q;(function(a){a.expandTextClickHandler="expandTextClickHandler";
a.hideTextClickHandler="hideTextClickHandler";a.toggleTextClickHandler="toggleTextClickHandler"})(Q||(Q={}));var ib=function(){function a(){}a.registerTextExpanderClickHandlers=function(){a.registerExpandTextClickHandler();a.registerHideTextClickHandler();a.registerToggleTextClickHandler()};a.registerExpandTextClickHandler=function(){var b=n["default"].setup().define;b(Q.expandTextClickHandler,"click",function(c){c.stopBubble();c=a.getTextExpanderClient(c);null===c||void 0===c?void 0:c.expandText()})};
a.registerHideTextClickHandler=function(){var b=n["default"].setup().define;b(Q.hideTextClickHandler,"click",function(c){c.stopBubble();c=a.getTextExpanderClient(c);null===c||void 0===c?void 0:c.hideText()})};a.registerToggleTextClickHandler=function(){var b=n["default"].setup().define;b(Q.toggleTextClickHandler,"click",function(c){c.stopBubble();c=a.getTextExpanderClient(c);null===c||void 0===c?void 0:c.toggleText()})};a.getTextExpanderClient=function(b){var c;b=null===(c=b.currentTarget)||void 0===
c?void 0:c.dataset.reviewid;return ia(p.getPopoverWidgetById(b))};return a}(),va=function(){function a(b){this.actionButtons=b}a.getActionButtonsContainer=function(b){var c=v["default"].cardRoot.ownerDocument.getElementsByClassName("_Y3Itb_cr-vote-report-buttons-container_1YjZZ");return Array.from(c).filter(function(d){return d.dataset.id===b})[0]};a.prototype.likeButtonClicked=function(){var b=this.actionButtons.querySelectorAll("div[data-variant='like']")[0],c=this.actionButtons.querySelectorAll("div[data-variant='like-done']")[0];
u(b);t(c)};return a}(),wa=function(){function a(){this.errorDialog=v["default"].cardRoot.ownerDocument.querySelector("._Y3Itb_media-popover-error-dialog_2LoQP")}a.prototype.show=function(){t(this.errorDialog)};a.prototype.hide=function(){u(this.errorDialog)};return a}(),ka;(ka||(ka={})).closeToastBar="closeToastBarClickHandler";var jb=function(){function a(){}a.registerCloseToastBarClickHandler=function(){var b=n["default"].setup().define;b(ka.closeToastBar,"click",function(c){c.stopBubble();(new O(c.currentTarget.dataset.toastBarName)).hide()})};
return a}(),kb=function(){function a(){}a.prototype.registerMediaPopoverClickHandlers=function(){hb.registerClosePopoverClickHandler();this.registerOpenPopoverReportConfirmationDialog();this.registerHelpfulVoteClickHandler();this.registerMediaOverlayClickHandlers();this.registerNoopHandler();this.registerConfirmReportAbuseClickHandler();this.registerClosePopoverErrorDialogClickHandler();this.registerLoadMediaPopoverClickHandler();jb.registerCloseToastBarClickHandler()};a.prototype.registerNoopHandler=
function(){var b=n["default"].setup().define;b(w.noopHandler,"click",function(c){c.stopBubble()})};a.prototype.registerMediaOverlayClickHandlers=function(){this.registerMediaOverlayNavigationClickHandlers();ib.registerTextExpanderClickHandlers()};a.prototype.registerClosePopoverErrorDialogClickHandler=function(){var b=n["default"].setup().define;b(w.closePopoverErrorDialogClickHandler,"click",function(c){c.stopBubble();(new wa).hide()})};a.prototype.registerMediaOverlayNavigationClickHandlers=function(){var b=
n["default"].setup().define;b(w.popoverClickHandler,"click",function(c){var d=c.event,e=c.currentTarget;var f=d.clientX/e.clientWidth*100;d=d.clientY/e.clientHeight*100;e=(e.clientWidth>e.clientHeight?M.LANDSCAPE:M.POTRAIT)===M.POTRAIT?{lowerBound:33,upperBound:67}:{lowerBound:40,upperBound:80};f=d<=e.lowerBound||d>=e.upperBound?x.NONE:25>=f?x.LEFT:75<=f?x.RIGHT:x.CENTER;(new p(p.getPopoverWidgetById(c.currentTarget.dataset.reviewid))).handlePopoverClick(f)});b(w.desktopRightClickHandler,"click",
function(c){(new p(p.getPopoverWidgetById(c.currentTarget.dataset.reviewid))).handlePopoverClick(x.RIGHT)});b(w.desktopLeftClickHandler,"click",function(c){(new p(p.getPopoverWidgetById(c.currentTarget.dataset.reviewid))).handlePopoverClick(x.LEFT)})};a.prototype.registerOpenPopoverReportConfirmationDialog=function(){var b=n["default"].setup().define;b(w.openReportConfirmationDialogClickHandler,"click",function(c){c.stopBubble();K.showReportAbuseConfirmationDialog(c.currentTarget.dataset.id,c.currentTarget.dataset.asin)})};
a.prototype.showErrorDialog=function(){(new U).hide();(new wa).show()};a.prototype.registerConfirmReportAbuseClickHandler=function(){var b=this,c=n["default"].setup().define,d=W["default"].setup(["reportAbuse"]);c(w.confirmReportAbuseClickHandler,"click",function(e){e.stopBubble();var f=e.currentTarget.firstChild.dataset.id;e=e.currentTarget.firstChild.dataset.asin;d.reportAbuse({reviewId:f,domain:R(),asin:e}).then(function(g){!g.success&&g.redirectUrl?B["default"].setLocation(g.redirectUrl):g.success?
(K.back(),(new p(p.getPopoverWidgetById(f))).scrollIntoNextPopover(),(new O("reportAbuseThankYouMessage")).show()):b.showErrorDialog()})})};a.prototype.registerHelpfulVoteClickHandler=function(){var b=this,c=n["default"].setup().define,d=W["default"].setup(["helpful"]);c(w.helpfulVoteClickHandler,"click",function(e){e.stopBubble();var f=e.currentTarget.dataset.id;e=e.currentTarget.dataset.asin;d.helpful({reviewId:f,domain:R(),asin:e}).then(function(g){!g.success&&g.redirectUrl?B["default"].setLocation(g.redirectUrl):
g.success?(new va(va.getActionButtonsContainer(f))).likeButtonClicked():b.showErrorDialog()})})};a.prototype.registerLoadMediaPopoverClickHandler=function(){var b=this,c=n["default"].setup().define;c(w.loadMediaPopover,"click",function(d){return h.__awaiter(b,void 0,void 0,function(){var e,f,g,k;return h.__generator(this,function(l){switch(l.label){case 0:return e=aa()?new ta:new ua,f=null===(k=d.currentTarget)||void 0===k?void 0:k.dataset,g=m[f.mediatype],e.show(),e.setLoadingAnimation(!0),[4,K.loadMediaPopover({asin:f.asin,
mediaType:g,reviewId:f.reviewid,mediaId:f.mediaid,popoverDetails:{popoverName:f.popovername},isDesktop:!aa()})];case 1:return l.sent(),[2]}})})})};return a}();la._operationNames=[];la.card=function(){return h.__awaiter(void 0,void 0,void 0,function(){var a,b,c;return h.__generator(this,function(d){switch(d.label){case 0:return q.setPrefix("cr-media-carousel"),[4,fb.getThumbnailClickHandler()];case 1:return a=d.sent(),b=new gb(a),b.registerThumbnailClickHandlers(),[4,Z()];case 2:return d.sent()||(c=
new kb,c.registerMediaPopoverClickHandlers()),q.logCounter("client.loaded",1),[2]}})})}});
